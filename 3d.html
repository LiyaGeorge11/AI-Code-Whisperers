<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Inspection Cube</title>

<style>
:root {
    --bg: radial-gradient(circle at top, #1e293b, #020617);
    --glass: rgba(148,163,184,0.16);
    --edge: rgba(226,232,240,0.6);
    --glow: rgba(147,197,253,0.35);
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    height: 100vh;
    background: var(--bg);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    font-family: system-ui, sans-serif;
    color: #e5e7eb;
}

.scene {
    width: 360px;
    height: 360px;
    perspective: 1400px;
}

.cube {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
}

/* Glass faces */
.face {
    position: absolute;
    width: 360px;
    height: 360px;
    background: var(--glass);
    border: 1px solid var(--edge);
    box-shadow: inset 0 0 40px rgba(255,255,255,0.06),
                0 0 25px var(--glow);
    backdrop-filter: blur(2px);
}

/* Fallback if backdrop-filter unsupported */
@supports not (backdrop-filter: blur(2px)) {
    .face {
        background: rgba(148,163,184,0.22);
    }
}

/* Geometry */
.front  { transform: translateZ(180px); }
.back   { transform: rotateY(180deg) translateZ(180px); }
.right  { transform: rotateY(90deg) translateZ(180px); }
.left   { transform: rotateY(-90deg) translateZ(180px); }
.top    { transform: rotateX(90deg) translateZ(180px); }
.bottom { transform: rotateX(-90deg) translateZ(180px); }

/* Hint */
.hint {
    position: fixed;
    bottom: 18px;
    font-size: 13px;
    opacity: 0.65;
    text-align: center;
    width: 100%;
}
</style>
</head>

<body>

<div class="scene" id="scene">
    <div class="cube" id="cube">
        <div class="face front"></div>
        <div class="face back"></div>
        <div class="face right"></div>
        <div class="face left"></div>
        <div class="face top"></div>
        <div class="face bottom"></div>
    </div>
</div>

<div class="hint">Hover or move cursor â€¢ Smooth 3D inspection</div>

<script>
/* ======================================
   ROBUST 3D ORBIT ENGINE
   ====================================== */

const scene = document.getElementById("scene");
const cube = document.getElementById("cube");

// Rotation state
let rotX = -25;
let rotY = 0;

// Base idle rotation
const baseSpeed = { x: 0.10, y: 0.16 };

// Hover bias
let biasX = 0;
let biasY = 0;

// Clamp helper (base case safety)
function clamp(val, min, max) {
    return Math.min(Math.max(val, min), max);
}

// Mouse interaction
scene.addEventListener("mousemove", e => {
    const rect = scene.getBoundingClientRect();
    if (!rect.width || !rect.height) return;

    const nx = (e.clientX - rect.left) / rect.width - 0.5;
    const ny = (e.clientY - rect.top) / rect.height - 0.5;

    biasY = clamp(nx * 12, -15, 15);
    biasX = clamp(-ny * 12, -15, 15);
});

// Remove bias smoothly
scene.addEventListener("mouseleave", () => {
    biasX = 0;
    biasY = 0;
});

// Touch support (mobile base case)
scene.addEventListener("touchmove", e => {
    const touch = e.touches[0];
    const rect = scene.getBoundingClientRect();

    const nx = (touch.clientX - rect.left) / rect.width - 0.5;
    const ny = (touch.clientY - rect.top) / rect.height - 0.5;

    biasY = clamp(nx * 10, -12, 12);
    biasX = clamp(-ny * 10, -12, 12);
}, { passive: true });

function animate() {
    // Base continuous orbit
    rotX += baseSpeed.x;
    rotY += baseSpeed.y;

    // Apply hover bias gently
    rotX += biasX * 0.035;
    rotY += biasY * 0.035;

    // Prevent extreme flips (base case)
    rotX = clamp(rotX, -360, 360);
    rotY = clamp(rotY, -360, 360);

    cube.style.transform =
        `rotateX(${rotX}deg) rotateY(${rotY}deg)`;

    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
